# hdf5 Parallel Library Test Makefile(.in)
#
# Copyright (C) 1998 National Center for Supercomputing Applications
#                    All rights reserved
#
#
top_srcdir=@top_srcdir@
top_builddir=..
srcdir=@srcdir@
VPATH=.:@srcdir@
@COMMENCE@

# Add the include directory to the C preprocessor flags the the hdf5 library
# to the library list.
CPPFLAGS=-I. -I$(srcdir) -I../src -I$(top_srcdir)/src @CPPFLAGS@
LIBHDF5=../src/libhdf5.la

# These tests are parallel
RUNTEST=$(RUNPARALLEL)

# These are our main targets
TEST_PROGS=testphdf5

# Temporary files
MOSTLYCLEAN=ParaEg[123].h5f
DISTCLEAN=go

# Test source files
TEST_SRC=testphdf5.c t_dset.c t_file.c t_mpi.c
TEST_OBJ=$(TEST_SRC:.c=.lo)
TEST_HDR=testphdf5.h

# How to build the tests... They all depend on the hdf5 library
$(TEST_PROGS): ../src/libhdf5.la

testphdf5: $(TEST_OBJ)
	@$(LT_LINK_EXE) $(CFLAGS) -o $@ $(TEST_OBJ) $(LIBHDF5) $(LDFLAGS) $(LIBS)

$(TEST_OBJ): $(TEST_HDR)
@CONCLUDE@
