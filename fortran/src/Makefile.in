##
## HDF5 Forgran Library Makefile(.in)
##
## Copyright (C) 2000 National Center for Supercomputing Applications.
##		      All rights reserved.
##
top_srcdir=@top_srcdir@/..
top_builddir=../..
srcdir=@srcdir@
@COMMENCE@

hdf5_srcdir=$(top_srcdir)/src
hdf5_builddir=$(top_builddir)/src

TRACE=perl $(top_srcdir)/bin/trace

## Add `-I.' to the C preprocessor flags.
CPPFLAGS=-I. -I$(hdf5_builddir) -I$(hdf5_srcdir) @CPPFLAGS@

## This is our main target
LIB=libhdf5_fortran.la
DISTCLEAN=H5fortran_types.f90

## Source and object files for the library
ADD_PARALLEL_FILES=@ADD_PARALLEL_FILES@

FPAR_MOD=${ADD_PARALLEL_FILES:yes=HDF5mpio.f90}

CPARALLEL=${ADD_PARALLEL_FILES:yes=H5FDmpiof.c}
CLIB_SRC=H5f90kit.c H5f.c H5Git.c H5Rf.c H5Ff.c  H5Sf.c H5Df.c H5Gf.c	\
	 H5Af.c H5Tf.c H5Pf.c H5If.c H5Ef.c ${CPARALLEL:no=}

FPARALLEL=${ADD_PARALLEL_FILES:yes=H5FDmpioff.f90}
FLIB_SRC=H5fortran_types.f90 H5fortran_flags.f90 H5f90global.f90 H5ff.f90	\
         H5Rff.f90 H5Fff.f90 H5Sff.f90 H5Dff.f90 H5Gff.f90 H5Aff.f90 H5Tff.f90 	\
	 H5Pff.f90 H5Iff.f90 H5Eff.f90 ${FPARALLEL:no=} ${FPAR_MOD:no=HDF5.f90}

LIB_SRC=$(CLIB_SRC) $(FLIB_SRC)
LIB_OBJ=$(CLIB_SRC:.c=.lo) $(FLIB_SRC:.f90=.lo)

ARFLAGS=rc

@CONCLUDE@
