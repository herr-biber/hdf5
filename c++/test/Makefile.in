## HDF5-C++ test/Makefile(.in)
##
## Copyright (C) 2000 National Center for Supercomputing Applications.
##                    All rights reserved.
##
##
top_srcdir=@top_srcdir@/..
top_builddir=../..
srcdir=@srcdir@
@COMMENCE@

hdf5_srcdir=$(top_srcdir)/src
hdf5_builddir=$(top_builddir)/src

## Add include directory to the C preprocessor flags and the h5test and hdf5
## libraries to the library list.
CPPFLAGS=-I. -I../src -I$(srcdir)/../src -I$(top_srcdir)/test -I$(hdf5_builddir) -I$(hdf5_srcdir) @CPPFLAGS@

## These are our main targets. They should be listed in the order to be
## executed, generally most specific tests to least specific tests.
RUNTEST=$(LT_RUN)

## Add include directory to the C preprocessor flags and the h5test and hdf5
## libraries to the library list.
LT_LINK_LIB=$(LT) --mode=link $(CXX) -rpath $(libdir)
LIB=../src/libhdf5_cpp.la
LIBHDF5=$(hdf5_builddir)/libhdf5.la

## These are our main targets. They should be listed in the order to be
## executed, generally most specific tests to least specific tests.
RUNTEST=$(LT_RUN)

TEST_SRC=dsets.cpp testhdf5.cpp tfile.cpp th5s.cpp
TEST_OBJ=$(TEST_SRC:.cpp=.lo)
TEST_PROGS=dsets testhdf5

TESTHDF5_OBJ=testhdf5.lo tfile.lo th5s.lo

TEST_SCRIPTS=

DISTCLEAN=$(TEST_PROGS_SRC:.cpp=.lo) $(TEST_PROGS_SRC:.cpp=.o)

$(TEST_PROGS): $(LIB) $(LIBHDF5)

testhdf5: $(TEST_OBJ)
	@$(LT_LINK_EXE) $(CFLAGS) -o $@ $(TESTHDF5_OBJ) $(LIB) $(LIBHDF5) $(LDFLAGS) $(LIBS)

dsets: dsets.lo
	@$(LT_LINK_EXE) $(CFLAGS) -o $@ dsets.lo $(hdf5_builddir)/../test/h5test.lo $(LIB) $(LIBHDF5) $(LDFLAGS) $(LIBS)

@CONCLUDE@
